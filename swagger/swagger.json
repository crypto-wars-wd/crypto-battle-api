{
  "swagger": "2.0",
  "info": {
    "description": "API for Crypto Battle",
    "version": "1.0.0",
    "title": "Crypto Battle API",
    "contact": {
      "email": "borysan@wizardsdev.com"
    }
  },
  "host": "localhost:3001",
  "paths": {
    "/api/auth/facebook": {
      "post": {
        "tags": [
          "Auth"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "body",
            "description": "facebook access_token",
            "schema": {
              "example": {
                "access_token": "EAAoetDkh80gBAHhpsPTdDgayEUsCsoD1OZCMaQOSPoPpGgi4dG4h5gsKML4wdWEnPZATO1GkDCq97fH2UVI1xOCOXNYpSnKWXXfmRcAqdFV5lTH9Wf2aPcoAeJ0f7mnGXp8hhP4Bzxynp3iZARiJGbY8GZAF1Pg0VuzHQwwYAmhWNhgXmqCb1FhwZCVoRlWOJMt2IqahcXQZDZD"
              }
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "User data with auth headers",
            "schema": {
              "example": {
                "user": {
                  "provider": "facebook",
                  "level": 1,
                  "health": 100,
                  "numberOfVictories": 0,
                  "numberOfLosses": 0,
                  "numberOfFights": 0,
                  "_id": "5ec2508a2814e541c9f682f6",
                  "alias": "Борис Андржиевский",
                  "avatar": "https://graph.facebook.com/v2.6/3082485935144934/picture?type=large",
                  "createdAt": "2020-05-18T09:08:26.181Z",
                  "updatedAt": "2020-05-18T09:08:26.181Z",
                  "__v": 0
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "example": {
                "success": false,
                "message": "Token not found"
              }
            }
          }
        }
      }
    },
    "/api/auth/google": {
      "post": {
        "tags": [
          "Auth"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "body",
            "description": "google access_token",
            "schema": {
              "example": {
                "access_token": "ya29.a0AfH6SMBfUydczmMP6cMR-41_a0I_A9-xLEblIjJQffRhU7hJnIoHJtjAQ1r_ueCdwPpsNGKqwlpnZVE4ECiqlYidPAFXstlZqjyRCGCRUzik4QkLfstU3Ps-lMIW0lbKBJZRdB3HTSV4EmdQHH5aG6S1sffxVZ-W3zeS"
              }
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "User data with auth headers",
            "schema": {
              "example": {
                "user": {
                  "provider": "google",
                  "level": 1,
                  "health": 100,
                  "numberOfVictories": 0,
                  "numberOfLosses": 0,
                  "numberOfFights": 0,
                  "_id": "5ec251882814e541c9f682f8",
                  "alias": "Борис Андржиевский",
                  "avatar": "https://lh4.googleusercontent.com/-Z7PioxRYnxU/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckZj4qhKP_58dTUlUwR-_SRDE87XQ/photo.jpg",
                  "createdAt": "2020-05-18T09:12:40.383Z",
                  "updatedAt": "2020-05-18T09:12:40.383Z",
                  "__v": 0
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "example": {
                "success": false,
                "message": "Token not found"
              }
            }
          }
        }
      }
    },
    "/api/validate-auth-token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "produces": [
          "application/json"
        ],
        "description": "Send access-token in headers. If token expired and valid, a new access token will respond. Auth headers are: access-token",
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "user access token from response headers /auth/google or facebook ",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "User data with auth headers",
            "schema": {
              "example": {
                "user": {
                  "provider": "google",
                  "_id": "5ec251882814e541c9f682f8",
                  "level": 1,
                  "health": 100,
                  "numberOfVictories": 0,
                  "numberOfLosses": 0,
                  "numberOfFights": 0,
                  "alias": "Борис Андржиевский",
                  "avatar": "https://lh4.googleusercontent.com/-Z7PioxRYnxU/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckZj4qhKP_58dTUlUwR-_SRDE87XQ/photo.jpg",
                  "createdAt": "2020-05-18T09:12:40.383Z",
                  "updatedAt": "2020-05-18T09:12:40.383Z",
                  "__v": 0
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "example": {
                "success": false,
                "message": "Token not found"
              }
            }
          }
        }
      }
    },
    "/api/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "produces": [
          "application/json"
        ],
        "description": "This root for destroing user session",
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "user access token from response headers /auth/google or facebook ",
            "type": "string",
            "required": true
          },
          {
            "name": "body",
            "in": "body",
            "description": "id is required",
            "schema": {
              "example": {
                "id": "5ebd20828796b71a9c4e89a5"
              }
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Session deleted  "
          },
          "422": {
            "description": "Wrong data",
            "schema": {
              "example": {
                "success": false,
                "error": {
                  "_original": {},
                  "details": [
                    {
                      "message": "\"id\" is required",
                      "path": [
                        "id"
                      ],
                      "type": "any.required",
                      "context": {
                        "label": "id",
                        "key": "id"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "example": {
                "success": false,
                "message": "Token not found"
              }
            }
          }

        }
      }
    },
    "/api/create-battle": {
      "post": {
        "tags": [
          "Battle"
        ],
        "produces": [
          "application/json"
        ],
        "description": "This root for creating new battle from socket server. All properties are required",
        "parameters": [
          {
            "name": "create battle body",
            "in": "body",
            "description": "all props are required",
            "schema": {
              "example": {
                "cryptoName": "BTC",
                "playerID": "5ebd249c58f9b51db9a2b1f4",
                "healthPoints": "220",
                "avatar": "xcvbcxvbxcbv",
                "alias": "Borik"
              }
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Battle data ",
            "schema": {
              "example": {
                "battle": {
                  "playersInfo": {
                    "firstPlayer": {
                      "cryptoName": "BTC",
                      "playerID": "5ebd249c58f9b51db9a2b1f4",
                      "avatar": "xcvbcxvbxcbv",
                      "alias": "Borik"
                    },
                    "healthPoints": 220
                  },
                  "steps": [],
                  "gameStatus": "WAITING",
                  "_id": "5ebeafff74f7224ef0ef8427",
                  "createdAt": "2020-05-15T15:06:39.403Z",
                  "updatedAt": "2020-05-15T15:06:39.403Z",
                  "__v": 0
                }
              }
            }
          },
          "422": {
            "description": "Wrong data",
            "schema": {
              "example": {
                "success": false,
                "error": {
                  "_original": {
                    "cryptoName": "BTC",
                    "playerID": "5ebd48d7d674a036484060ba",
                    "healthPoints": ""
                  },
                  "details": [
                    {
                      "message": "\"healthPoints\" must be a number",
                      "path": [
                        "healthPoints"
                      ],
                      "type": "number.base",
                      "context": {
                        "label": "healthPoints",
                        "value": "",
                        "key": "healthPoints"
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/update-user-info": {
      "post": {
        "tags": [
          "User"
        ],
        "produces": [
          "application/json"
        ],
        "description": "This root for updating alias and avatar",
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "user access token from response headers /auth/google or facebook ",
            "type": "string",
            "required": true
          },
          {
            "name": "body",
            "in": "body",
            "description": "all props are required",
            "schema": {
              "example": {
                "id": "5ebd20828796b71a9c4e89a5",
                "alias": "Batman",
                "avatar": "https://www.google.com/search?q=pictures&client=ubuntu&hs=0Nz&tbm=isch&source=iu&ictx=1&fir=w2DfUiGh9nbK5M%253A%252CgnBbb_yW79vLUM%252C_&vet=1&usg=AI4_-kQ-aUSr1t2oTUO2LLYPOb5bsCn-jw&sa=X&ved=2ahUKEwjR172Ngr3pAhWyyqYKHRZUCT0Q9QEwBXoECAgQOg#imgrc=w2DfUiGh9nbK5M:"
              }
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Updated data ",
            "schema": {
              "example": {
                "user": {
                  "_id": "5ebd20828796b71a9c4e89a5",
                  "level": 1,
                  "health": 100,
                  "numberOfVictories": 0,
                  "numberOfLosses": 0,
                  "numberOfFights": 0,
                  "alias": "Batman",
                  "avatar": "https://www.google.com/search?q=pictures&client=ubuntu&hs=0Nz&tbm=isch&source=iu&ictx=1&fir=w2DfUiGh9nbK5M%253A%252CgnBbb_yW79vLUM%252C_&vet=1&usg=AI4_-kQ-aUSr1t2oTUO2LLYPOb5bsCn-jw&sa=X&ved=2ahUKEwjR172Ngr3pAhWyyqYKHRZUCT0Q9QEwBXoECAgQOg#imgrc=w2DfUiGh9nbK5M:",
                  "auth": {
                    "sessions": [
                      {
                        "_id": "5ebd20c88796b71a9c4e89a7",
                        "sid": "5ebd20c8601d0d480941d004",
                        "secretToken": "d2c88d9960d7dfbc423fc37b1b8a1c22200d6830212ce8899c38d29e8db0e934c8fb56a18f32fdb2bf1867c1df87b8b6c04025228c2fc4b15410b582adb75c0d"
                      }
                    ],
                    "provider": "google",
                    "id": "100171304431977375879"
                  },
                  "createdAt": "2020-05-14T10:42:10.028Z",
                  "updatedAt": "2020-05-18T08:46:31.003Z",
                  "__v": 0
                }
              }
            }
          },
          "422": {
            "description": "Wrong data",
            "schema": {
              "example": {
                "success": false,
                "error": {
                  "_original": {
                    "alias": "Batman",
                    "avatar": "https://www.google.com/search?q=pictures&client=ubuntu&hs=0Nz&tbm=isch&source=iu&ictx=1&fir=w2DfUiGh9nbK5M%253A%252CgnBbb_yW79vLUM%252C_&vet=1&usg=AI4_-kQ-aUSr1t2oTUO2LLYPOb5bsCn-jw&sa=X&ved=2ahUKEwjR172Ngr3pAhWyyqYKHRZUCT0Q9QEwBXoECAgQOg#imgrc=w2DfUiGh9nbK5M:"
                  },
                  "details": [
                    {
                      "message": "\"id\" is required",
                      "path": [
                        "id"
                      ],
                      "type": "any.required",
                      "context": {
                        "label": "id",
                        "key": "id"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "example": {
                "success": false,
                "message": "Token not found"
              }
            }
          }

        }
      }
    }
  }
}
