{
  "swagger": "2.0",
  "info": {
    "description": "API for Crypto Battle",
    "version": "1.0.0",
    "title": "Crypto Battle API",
    "contact": {
      "email": "borysan@wizardsdev.com"
    }
  },
  "host": "localhost:3001",
  "paths": {
    "/api/auth/facebook": {
      "post": {
        "tags": [
          "Auth"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "body",
            "description": "facebook access_token",
            "schema": {
              "example": {
                "access_token": "ya29.a0AfH6SMBfUydczmMP6cMR-41_a0I_A9-xLEblIjJQffRhU7hJnIoHJtjAQ1r_ueCdwPpsNGKqwlpnZVE4ECiqlYidPAFXstlZqjyRCGCRUzik4QkLfstU3Ps-lMIW0lbKBJZRdB3HTSV4EmdQHH5aG6S1sffxVZ-W3zeS"
              }
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "User data with auth headers",
            "examples": {
              "data": {
                "user": "user data"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/auth/google": {
      "post": {
        "tags": [
          "Auth"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "access_token",
            "in": "body",
            "description": "google access_token",
            "schema": {
              "example": {
                "access_token": "ya29.a0AfH6SMBfUydczmMP6cMR-41_a0I_A9-xLEblIjJQffRhU7hJnIoHJtjAQ1r_ueCdwPpsNGKqwlpnZVE4ECiqlYidPAFXstlZqjyRCGCRUzik4QkLfstU3Ps-lMIW0lbKBJZRdB3HTSV4EmdQHH5aG6S1sffxVZ-W3zeS"
              }
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "User data with auth headers",
            "examples": {
              "data": {
                "user": "user data"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/validate-auth-token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "produces": [
          "application/json"
        ],
        "description": "Send access-token in headers. If token expired and valid, a new access token will respond. Auth headers are: 'access-token, expires-in, waivio-auth",
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "user access token from response headers /auth/google or facebook ",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "User data with auth headers",
            "examples": {
              "data": {
                "user": "user data"
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/create-battle": {
      "post": {
        "tags": [
          "Battle"
        ],
        "produces": [
          "application/json"
        ],
        "description": "This root for creating new battle from socket server. All properties are required",
        "parameters": [
          {
            "name": "create battle body",
            "in": "body",
            "description": "all props are required",
            "schema": {
              "example": {
                "cryptoName": "BTC",
                "playerID": "5ebd249c58f9b51db9a2b1f4",
                "healthPoints": "220",
                "avatar": "xcvbcxvbxcbv",
                "alias": "Borik"
              }
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Battle data ",
            "schema": {
              "example": {
                "battle": {
                  "playersInfo": {
                    "firstPlayer": {
                      "cryptoName": "BTC",
                      "playerID": "5ebd249c58f9b51db9a2b1f4",
                      "avatar": "xcvbcxvbxcbv",
                      "alias": "Borik"
                    },
                    "healthPoints": 220
                  },
                  "steps": [],
                  "gameStatus": "WAITING",
                  "_id": "5ebeafff74f7224ef0ef8427",
                  "createdAt": "2020-05-15T15:06:39.403Z",
                  "updatedAt": "2020-05-15T15:06:39.403Z",
                  "__v": 0
                }
              }
            }
          },
          "422": {
            "description": "Wrong data",
            "schema": {
              "example": {
                "success": false,
                "error": {
                  "_original": {
                    "cryptoName": "BTC",
                    "playerID": "5ebd48d7d674a036484060ba",
                    "healthPoints": ""
                  },
                  "details": [
                    {
                      "message": "\"healthPoints\" must be a number",
                      "path": [
                        "healthPoints"
                      ],
                      "type": "number.base",
                      "context": {
                        "label": "healthPoints",
                        "value": "",
                        "key": "healthPoints"
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}
